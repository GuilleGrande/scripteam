# Story 2.1: React Web Complete PoC - End-to-End ScripTeam Experience

## Status
Ready for Implementation

## Story
**As a** drama student,
**I want** a complete web-based ScripTeam experience that takes me from script upload through AI-powered scene practice,
**so that** I can validate the full value proposition of practicing with AI scene partners.

## Acceptance Criteria

### 1. Script Upload & Analysis
- User can upload PDF/TXT script files through intuitive web interface
- System extracts and displays script content with 95%+ accuracy
- AI analyzes script and identifies characters, scenes, and dialogue structure
- User can review and confirm extracted characters and scenes

### 2. Character & Scene Management
- System automatically detects main characters from script analysis
- User can select which character they want to play
- System presents available scenes featuring the user's chosen character
- Clear scene selection interface with character participation indicators

### 3. AI Voice Generation
- System generates unique AI voices for each non-user character
- Voice synthesis uses ElevenLabs API with Spanish/English support
- Each character gets consistent voice personality throughout scenes
- Voice quality suitable for practice sessions (clear, natural-sounding)

### 4. Scene Preparation & Setup
- User selects specific scene to practice
- System displays scene context and character motivations
- User can review their lines and other characters' lines
- Practice session setup with difficulty/pacing options

### 5. Interactive Scene Practice
- Real-time conversation flow with AI characters speaking their lines
- User speaks/types their character's lines at appropriate moments
- System manages turn-taking and scene progression
- Audio playback of AI character voices integrated seamlessly

### 6. Session Management
- User can pause, resume, restart scenes at any time
- Progress tracking through scene completion
- Basic session history and practice statistics
- Option to practice same scene multiple times

## Tasks / Subtasks

### Phase A: Foundation Setup (Day 1)
- [x] ~~Create React app with Vite + TypeScript~~
- [ ] Set up project structure and development environment
- [ ] Install and configure ShadCN/UI components
- [ ] Set up Tailwind CSS and basic styling system
- [ ] Configure API client for backend integration

### Phase B: Script Upload & Analysis (Day 1-2)
- [ ] **Create ScriptUpload component** (reuse existing logic)
  - [ ] File drag-and-drop interface with validation
  - [ ] Upload progress indicator and error handling
  - [ ] Integration with existing `/scripts` API endpoint
- [ ] **Script Analysis Display**
  - [ ] Show extracted text with formatting
  - [ ] Display identified characters list
  - [ ] Show detected scenes with character participation
  - [ ] User confirmation and editing capabilities

### Phase C: Character & Voice Setup (Day 2-3)
- [ ] **Character Selection Interface**
  - [ ] List all detected characters with descriptions
  - [ ] User selects their character role
  - [ ] Visual character card design
- [ ] **AI Voice Generation Integration**
  - [ ] Connect to ElevenLabs API for voice synthesis
  - [ ] Generate unique voice for each AI character
  - [ ] Voice preview functionality
  - [ ] Voice consistency management

### Phase D: Scene Selection & Setup (Day 3)
- [ ] **Scene Browser Component**
  - [ ] List scenes with character participation
  - [ ] Scene context and description display
  - [ ] Character involvement indicators
- [ ] **Practice Session Setup**
  - [ ] Scene selection and confirmation
  - [ ] User character preparation interface
  - [ ] Practice mode options (guided/free)

### Phase E: Interactive Scene Practice (Day 4)
- [ ] **Scene Playback Engine**
  - [ ] Turn-based conversation management
  - [ ] AI voice audio playback system
  - [ ] User input handling (text/voice)
  - [ ] Scene progression logic
- [ ] **Practice Session UI**
  - [ ] Clean, focused practice interface
  - [ ] Character line display and prompts
  - [ ] Audio controls and timing
  - [ ] Session navigation controls

### Phase F: Session Management & Polish (Day 5)
- [ ] **Session Controls**
  - [ ] Pause, resume, restart functionality
  - [ ] Session progress tracking
  - [ ] Practice history storage
- [ ] **UI/UX Polish**
  - [ ] Responsive design across screen sizes
  - [ ] Smooth animations and transitions
  - [ ] Error handling and user feedback
  - [ ] Performance optimization

## Technical Implementation

### Frontend Architecture
```typescript
// Core Components Structure
apps/web-v2/src/
├── components/
│   ├── ScriptUpload/         # File upload and analysis
│   ├── CharacterSelect/      # Character choice interface
│   ├── SceneSelect/          # Scene selection browser
│   ├── VoicePreview/         # AI voice testing
│   ├── PracticeSession/      # Main practice interface
│   └── SessionHistory/       # Practice tracking
├── hooks/
│   ├── useScriptAnalysis     # Script processing logic
│   ├── useVoiceGeneration    # AI voice management
│   └── usePracticeSession    # Session state management
└── services/
    ├── apiClient.ts          # Backend integration
    ├── voiceService.ts       # ElevenLabs integration
    └── audioPlayer.ts        # Audio playback management
```

### Backend Integration
- **Reuse Existing API**: `/scripts` endpoint for upload and analysis
- **New Endpoints Needed**:
  - `GET /scripts/:id/characters` - Character list with analysis
  - `GET /scripts/:id/scenes` - Scene breakdown with characters
  - `POST /voices/generate` - AI voice generation
  - `GET /scenes/:id/practice` - Practice session data

### Voice Integration
- **Primary**: ElevenLabs Flash v2.5 for character voices
- **Fallback**: Play.HT for redundancy and cost optimization
- **Languages**: Spanish and English support
- **Performance**: ~75ms latency target for natural conversation

## Success Criteria

### Technical Validation
- [ ] Complete script-to-practice workflow functional
- [ ] AI voice generation working for all character types
- [ ] Scene practice playable end-to-end
- [ ] Cross-browser compatibility (Chrome, Firefox, Safari, Edge)
- [ ] Responsive design working on desktop and tablet

### User Experience Validation
- [ ] Intuitive workflow from upload to practice
- [ ] Natural-feeling conversation with AI characters
- [ ] Clear visual feedback and progress indicators
- [ ] Error states handled gracefully
- [ ] Session can be completed without confusion

### Business Validation
- [ ] Core value proposition demonstrable to users
- [ ] Complete user journey testable
- [ ] Competitive differentiation visible (AI scene partners)
- [ ] Educational value clear from practice sessions
- [ ] User feedback collection possible

## Dev Notes

### Reusable Assets from Story 1.1
- **ScriptUpload Logic**: File handling, validation, progress UI
- **API Backend**: All existing endpoints work without changes
- **Database Schema**: Script and character models already designed
- **PDF Processing**: Text extraction and analysis pipeline

### New Development Areas
- **Character Detection**: Enhance AI analysis for character identification
- **Voice Synthesis**: New integration with ElevenLabs API
- **Scene Parsing**: Break scripts into practiceable scene segments
- **Conversation Engine**: Turn-based interaction with AI characters
- **Audio Playback**: Seamless voice audio integration

### Performance Considerations
- **Bundle Size**: Target <1MB for fast loading
- **API Calls**: Optimize for minimal voice generation requests
- **Audio Loading**: Preload character voices for smooth playback
- **Caching**: Cache generated voices and scene data

## Timeline
- **Start Date**: 2025-09-26 (immediately after documentation)
- **Target Completion**: 2025-10-01 (5 development days)
- **User Testing**: 2025-10-02 (immediate feedback collection)
- **Iteration**: Based on user feedback for Epic 2 planning

## Related Documents
- `docs/architecture/decisions/adr-002-react-web-poc-pivot.md` - Architecture decision
- `docs/stories/1.1.basic-script-upload-and-text-processing.md` - Reusable components
- `docs/architecture/tech-stack.md` - Phase 1 technology stack

## Definition of Done
- [ ] Working web application deployed and accessible
- [ ] Complete user journey from script upload to scene practice functional
- [ ] AI voice generation integrated and working
- [ ] User can practice scenes with AI characters speaking
- [ ] Session management working (pause, resume, restart)
- [ ] Ready for user testing and feedback collection
- [ ] Documented for Flutter migration reference (Phase 2)

---

**Priority**: HIGHEST - This is the foundation for all future development and user validation